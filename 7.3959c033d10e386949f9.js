(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/DuN":function(t,s,e){"use strict";e.r(s),e.d(s,"EmpOrderModule",function(){return M});var r=e("1kSV"),i=e("ofXK"),o=e("fXoL"),c=e("VGjC");let b=(()=>{class t{constructor(t){this.userService=t,this.user=null,this.Username="",this.firstname="",this.lastname="",this.address="",this.city="",this.country="",this.zip="",this.phone_no="",this.email=""}ngOnInit(){this.loadUsers()}loadUsers(){const t=""+sessionStorage.customer_id;console.log(t),this.userService.getUserid(t).subscribe(t=>{"success"==t.status?(this.user=t.data,this.Username=this.user.username,this.firstname=this.user.first_name,this.lastname=this.user.last_name,this.address=this.user.address,this.city=this.user.city,this.country=this.user.country,this.zip=this.user.zip,this.phone_no=this.user.phone_no,this.email=this.user.email):console.log(t.error)})}}return t.\u0275fac=function(s){return new(s||t)(o.Ib(c.a))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-customer-details"]],decls:48,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"heading-small","text-muted","mb-4"]],template:function(t,s){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"h5"),o.wc(3,"Customer Details"),o.Mb(),o.Mb(),o.Nb(4,"div",2),o.Nb(5,"ul"),o.Nb(6,"li"),o.Nb(7,"h6",3),o.wc(8,"User information"),o.Mb(),o.Mb(),o.Nb(9,"table"),o.Nb(10,"tr"),o.Nb(11,"td"),o.Nb(12,"h6"),o.wc(13,"Cusromer name:"),o.Mb(),o.Mb(),o.wc(14,"\xa0\xa0"),o.Nb(15,"td"),o.wc(16),o.Mb(),o.Mb(),o.Jb(17,"br"),o.Mb(),o.Jb(18,"hr"),o.Nb(19,"li"),o.Nb(20,"h6",3),o.wc(21,"Contact information"),o.Mb(),o.Mb(),o.Nb(22,"table"),o.Nb(23,"tr"),o.Nb(24,"td"),o.Nb(25,"h6"),o.wc(26,"Address:"),o.Mb(),o.Mb(),o.wc(27,"\xa0\xa0"),o.Nb(28,"td"),o.wc(29),o.Mb(),o.Mb(),o.Jb(30,"br"),o.Nb(31,"tr"),o.Nb(32,"td"),o.Nb(33,"h6"),o.wc(34,"phone_no:"),o.Mb(),o.Mb(),o.wc(35,"\xa0\xa0"),o.Nb(36,"td"),o.wc(37),o.Mb(),o.Mb(),o.Jb(38,"br"),o.Nb(39,"tr"),o.Nb(40,"td"),o.Nb(41,"h6"),o.wc(42,"email:"),o.Mb(),o.Mb(),o.wc(43,"\xa0\xa0"),o.Nb(44,"td"),o.wc(45),o.Mb(),o.Mb(),o.Jb(46,"br"),o.Mb(),o.Jb(47,"hr"),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.wb(16),o.zc("",s.firstname," ",s.lastname,""),o.wb(13),o.Ac("",s.address,",",s.city,",",s.zip,""),o.wb(8),o.xc(s.phone_no),o.wb(8),o.xc(s.email))},styles:[""]}),t})();var n=e("tk/3");let d=(()=>{class t{constructor(t){this.httpClient=t,this.url="http://localhost:8080/orders"}deleteOrder(t){return this.httpClient.delete(this.url+"/by_cust_id/"+t)}getOrder(){return this.httpClient.get(this.url)}getOrderId(t){return this.url="http://localhost:8080/orders",this.httpClient.get(this.url+"/by_cust_id/"+t)}}return t.\u0275fac=function(s){return new(s||t)(o.Ub(n.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function h(t,s){if(1&t&&(o.Nb(0,"p"),o.wc(1),o.Mb()),2&t){const t=o.Zb().$implicit;o.wb(1),o.Ac("",t.mname," x ",t.quantity," = ",t.price," ")}}function u(t,s){if(1&t&&(o.Nb(0,"div"),o.uc(1,h,2,3,"p",7),o.Mb()),2&t){const t=s.$implicit,e=o.Zb().$implicit;o.wb(1),o.ec("ngIf",e==t.customer_id)}}function a(t,s){if(1&t){const t=o.Ob();o.Nb(0,"tr"),o.Nb(1,"td"),o.Nb(2,"a",5),o.Xb("click",function(){o.mc(t);const e=s.index,r=o.Zb();return r.getcustdetails(r.cust_id[e])}),o.wc(3),o.Mb(),o.Mb(),o.Nb(4,"td"),o.uc(5,u,2,1,"div",4),o.Mb(),o.Nb(6,"td"),o.wc(7),o.Mb(),o.Nb(8,"td"),o.Nb(9,"div"),o.Nb(10,"p"),o.wc(11),o.Mb(),o.Mb(),o.Mb(),o.Nb(12,"td"),o.Nb(13,"button",6),o.Xb("click",function(){o.mc(t);const e=s.index,r=o.Zb();return r.onDelete(r.orders[e].customer_id)}),o.wc(14,"Delete"),o.Mb(),o.Mb(),o.Mb()}if(2&t){const t=s.$implicit,e=s.index,r=o.Zb();o.wb(3),o.xc(t),o.wb(2),o.ec("ngForOf",r.orders),o.wb(2),o.xc(r.tot_amt[e+1]),o.wb(4),o.yc("",r.order_status[e]," ")}}let l=(()=>{class t{constructor(t,s){this.modalService=t,this.empOrderService=s,this.orders=[{}],this.cust_id=[],this.totalAmount=0,this.tot_amt=[],this.cust=[],this.temp=[],this.order_status=[]}ngOnInit(){this.loadOrder()}loadOrder(){this.empOrderService.getOrder().subscribe(t=>{if(t.status="success"){this.orders=t.data;for(let t=0;t<this.orders.length-1;t++)this.orders[t].customer_id!=this.orders[t+1].customer_id&&this.cust_id.push(this.orders[t].customer_id);this.cust_id.push(this.orders[this.orders.length-1].customer_id);for(let t=0;t<this.cust_id.length;t++)this.empOrderService.getOrderId(this.cust_id[t]).subscribe(t=>{"success"==t.status&&(this.temp=t.data),this.order_status.push(0==this.temp[0].order_status?"Not delivered":"delivered");for(let s=0;s<this.temp.length;s++)this.totalAmount+=parseFloat(this.temp[s].total_amount);this.tot_amt.push(this.totalAmount),this.totalAmount=0});this.tot_amt.push(this.totalAmount)}else null==t&&location.reload()})}orderById(){console.log(this.cust_id.length);for(let t=0;t<this.cust_id.length;t++)this.empOrderService.getOrderId(this.cust_id[t]).subscribe(t=>{if("success"==t.status){this.cust.push(t.data),console.log(this.cust);for(let t=0;t<this.cust.length;t++)this.totalAmount+=parseFloat(this.cust[t].total_amount)}})}onDelete(t){console.log(t),this.empOrderService.deleteOrder(t).subscribe(t=>{console.log(t),this.loadOrder()})}getcustdetails(t){sessionStorage.customer_id=t,this.modalService.open(b,{size:"md"})}}return t.\u0275fac=function(s){return new(s||t)(o.Ib(r.c),o.Ib(d))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-order-list"]],decls:20,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table","table-striped","table-bordered",2,"text-align","center"],[4,"ngFor","ngForOf"],[2,"cursor","pointer","color","blue",3,"click"],[1,"btn","btn-danger","btn-sm",2,"margin-left","10px",3,"click"],[4,"ngIf"]],template:function(t,s){1&t&&(o.Nb(0,"div",0),o.Nb(1,"div",1),o.Nb(2,"h4"),o.wc(3,"List of Orders"),o.Mb(),o.Mb(),o.Nb(4,"div",2),o.Nb(5,"table",3),o.Nb(6,"thead"),o.Nb(7,"tr"),o.Nb(8,"th"),o.wc(9,"Customer id"),o.Mb(),o.Nb(10,"th"),o.wc(11,"Order Summary"),o.Mb(),o.Nb(12,"th"),o.wc(13,"Total Amount"),o.Mb(),o.Nb(14,"th"),o.wc(15,"Order Status"),o.Mb(),o.Nb(16,"th"),o.wc(17,"Actions"),o.Mb(),o.Mb(),o.Mb(),o.Nb(18,"tbody"),o.uc(19,a,15,4,"tr",4),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.wb(19),o.ec("ngForOf",s.cust_id))},directives:[i.i,i.j],styles:[""]}),t})();var m=e("tyNb");const p=[{path:"order-list",component:l}];let N=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(s){return new(s||t)},imports:[[m.e.forChild(p)],m.e]}),t})(),M=(()=>{class t{}return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(s){return new(s||t)},imports:[[i.b,N,r.d]]}),t})()}}]);